;String to integer conversion.
;I am so sorry for this disaster

	FPOP SI
	
	LODSB
	MOV DI, NUMTABLE
	XCHG SI, DI
	MOV BL, AL
NUMLOOP0:
	LODSB
	OR AL, AL
	JZ NOTNUMBER
	CMP AL, BL
	JNZ NUMLOOP0
	MOV AX, [NUMBERSAVE]
	SUB SI, NUMTABLE
	SUB SI, 1
	OR AX, SI
	SHL AX, 4
	MOV [NUMBERSAVE], AX
	XCHG SI, DI
	
	LODSB
	MOV DI, NUMTABLE
	XCHG SI, DI
	MOV BL, AL
NUMLOOP1:
	LODSB
	CMP AL, BL
	JNZ NUMLOOP1
	OR AL, AL
	JZ NOTNUMBER
	MOV AX, [NUMBERSAVE]
	SUB SI, NUMTABLE
	SUB SI, 1
	OR AX, SI
	SHL AX, 4
	MOV [NUMBERSAVE], AX
	XCHG SI, DI
	
	LODSB
	MOV DI, NUMTABLE
	XCHG SI, DI
	MOV BL, AL
NUMLOOP2:
	LODSB
	CMP AL, BL
	JNZ NUMLOOP2
	OR AL, AL
	JZ NOTNUMBER
	MOV AX, [NUMBERSAVE]
	SUB SI, NUMTABLE
	SUB SI, 1
	OR AX, SI
	SHL AX, 4
	MOV [NUMBERSAVE], AX
	XCHG SI, DI
	
	LODSB
	MOV DI, NUMTABLE
	XCHG SI, DI
	MOV BL, AL
NUMLOOP3:
	LODSB
	CMP AL, BL
	JNZ NUMLOOP3
	OR AL, AL
	JZ NOTNUMBER
	MOV AX, [NUMBERSAVE]
	SUB SI, NUMTABLE
	SUB SI, 1
	OR AX, SI
	
	FPUSH AX
	
	NEXT
	
NUMBERSAVE: dw 0
NUMTABLE: db "0123456789ABCDEF",0